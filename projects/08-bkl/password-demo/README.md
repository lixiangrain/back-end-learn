# 密码加密存储演示

这个项目演示了如何在 Node.js 应用中安全地存储用户密码。

## 项目结构

```
password-demo/
├── package.json      # 项目配置文件
├── index.js          # 主程序文件
└── README.md         # 说明文档
```

## 为什么需要加密存储密码？

将用户密码以明文形式存储在数据库中是极其危险的。如果数据库被攻击者获取，所有用户的密码都会泄露，这会导致：

1. **用户隐私泄露**：用户可能在多个网站使用相同密码，一处泄露多处受影响
2. **身份冒用**：攻击者可以使用泄露的密码登录用户账户
3. **法律风险**：许多法规要求对敏感信息进行加密存储

## Hash 密码是什么？

Hash（哈希）是一种单向函数，它将任意长度的数据转换为固定长度的字符串。对于密码存储，我们使用密码作为输入，生成一个哈希值存储在数据库中。

特点：
- 单向性：从哈希值无法反推出原始密码
- 确定性：相同输入总是产生相同输出
- 雪崩效应：输入微小变化会导致输出巨大变化

## 常见的密码哈希算法

1. **MD5**：已被证明不安全，容易发生碰撞
2. **SHA-1**：安全性不足，已被淘汰
3. **SHA-256/SHA-512**：比前两者更安全，但仍不够
4. **bcrypt**：专为密码哈希设计，内置盐值，可调节计算复杂度
5. **scrypt**：内存密集型算法，抗ASIC攻击
6. **Argon2**：最新的密码哈希标准，提供三种变体

## 什么是彩虹表？

彩虹表是一种预先计算好的哈希值表，用于快速查找哈希值对应的原始密码。攻击者可以使用彩虹表快速破解简单的哈希密码。

防御彩虹表攻击的方法：
1. **加盐（Salt）**：为每个密码添加随机字符串后再哈希
2. **使用慢哈希算法**：如 bcrypt，增加计算时间成本

## 安装和运行

1. 安装依赖：
   ```bash
   npm install
   ```

2. 运行项目：
   ```bash
   npm start
   ```

   或者使用 nodemon 进行开发：
   ```bash
   npm run dev
   ```

## 代码说明

### 1. 安装和引入 bcrypt

```bash
npm install bcrypt
```

```javascript
const bcrypt = require('bcrypt');
```

### 2. 密码加密

```javascript
const saltRounds = 10;
const hashedPassword = await bcrypt.hash(plainPassword, saltRounds);
```

### 3. 密码验证

```javascript
const isMatch = await bcrypt.compare(plainPassword, hashedPassword);
```

## bcrypt 参数说明

### Salt Rounds（盐轮数）

salt rounds 决定了 bcrypt 算法的计算复杂度：

- 数值越高，计算越复杂，安全性越高
- 数值越高，计算时间越长
- 通常建议使用 10-12 之间的数值

## 最佳实践

1. **永远不要存储明文密码**
2. **使用 bcrypt、scrypt 或 Argon2 等专业密码哈希算法**
3. **为每个密码使用不同的盐值**
4. **选择合适的计算复杂度**
5. **定期更新加密算法和参数**